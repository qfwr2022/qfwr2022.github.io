<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>é‡åŒ–é‡‘èä¸é‡‘èç¼–ç¨‹</title>
    <meta charset="utf-8" />
    <meta name="author" content=" æ›¾æ°¸è‰º" />
    <meta name="date" content="2022-10-07" />
    <script src="../libs/header-attrs/header-attrs.js"></script>
    <link href="../libs/tile-view/tile-view.css" rel="stylesheet" />
    <script src="../libs/tile-view/tile-view.js"></script>
    <link href="../libs/tachyons/tachyons.min.css" rel="stylesheet" />
    <script src="../libs/freezeframe/freezeframe.min.js"></script>
    <script src="../libs/xaringanExtra-freezeframe/freezeframe-init.js"></script>
    <script id="xaringanExtra-freezeframe-options" type="application/json">{"selector":"img[src$=\"gif\"]","trigger":"click","overlay":false,"responsive":false,"warnings":true}</script>
    <script type="application/json" id="xaringanExtra-editable-docid">{"id":"fd03458482774f48b3b1319fc9a1c05a","expires":7}</script>
    <script src="../libs/himalaya/himalaya.js"></script>
    <script src="../libs/js-cookie/js.cookie.js"></script>
    <link href="../libs/editable/editable.css" rel="stylesheet" />
    <script src="../libs/editable/editable.js"></script>
    <link href="../libs/xaringanExtra-extra-styles/xaringanExtra-extra-styles.css" rel="stylesheet" />
    <link href="../libs/animate.css/animate.xaringan.css" rel="stylesheet" />
    <script src="../libs/clipboard/clipboard.min.js"></script>
    <link href="../libs/xaringanExtra-clipboard/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="../libs/xaringanExtra-clipboard/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"<i class=\"fa fa-copy\"><\/i>","success":"<i class=\"fa fa-check\" style=\"color: #90BE6D\"><\/i>","error":"<i class=\"fa fa-times-circle\" style=\"color: #F94144\"><\/i>"})</script>
    <link href="../libs/font-awesome/css/all.css" rel="stylesheet" />
    <link href="../libs/font-awesome/css/v4-shims.css" rel="stylesheet" />
    <link rel="stylesheet" href="../libs/zen-styles-v2.3.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# é‡åŒ–é‡‘èä¸é‡‘èç¼–ç¨‹
]
.subtitle[
## L04 å‘é‡ä¸å‡½æ•°
]
.author[
### <br>æ›¾æ°¸è‰º
]
.institute[
### å¦é—¨å¤§å­¦ç®¡ç†å­¦é™¢
]
.date[
### <br>2022-10-07
]

---




<div>
<style type="text/css">.xaringan-extra-logo {
width: 50px;
height: 50px;
z-index: 0;
background-image: url(imgs/logo-sm.png);
background-size: contain;
background-repeat: no-repeat;
position: absolute;
top:0.5em;right:0.5em;
}
</style>
<script>(function () {
  let tries = 0
  function addLogo () {
    if (typeof slideshow === 'undefined') {
      tries += 1
      if (tries < 10) {
        setTimeout(addLogo, 100)
      }
    } else {
      document.querySelectorAll('.remark-slide-content:not(.title-slide):not(.inverse):not(.hide_logo)')
        .forEach(function (slide) {
          const logo = document.createElement('div')
          logo.classList = 'xaringan-extra-logo'
          logo.href = null
          slide.appendChild(logo)
        })
    }
  }
  document.addEventListener('DOMContentLoaded', addLogo)
})()</script>
</div>

&lt;br&gt;
.font120[
&gt; To understand computations in __R__, two slogans are helpful:
&gt; 
&gt; - Everything that exists is an _object_.
&gt; 
&gt; - Everything that happens is a _function call_.
&gt; 
]

--

.pull-left.bold[

## __1. å‘é‡__
  * .font140[åŸå­å‘é‡]
  * .font140[åˆ—è¡¨]
  * .font140[å‘é‡å±æ€§]
  * .font140[å¢å¼ºå‘é‡]
  
]

--

.pull-right.bold[

## __2. å‡½æ•°__
  * .font140[ä½¿ç”¨å‡½æ•°çš„ä¼˜ç‚¹]
  * .font140[ç¼–å†™å‡½æ•°çš„å¥—è·¯]
  * .font140[å‡½æ•°çš„å‚æ•°]
  * .font140[å‡½æ•°çš„è¿”å›å€¼]
  * .font140[å‡½æ•°çš„ç¯å¢ƒ]
  * .font140[ä½œä¸ºä¸€ç­‰å…¬æ°‘çš„å‡½æ•°]

]

---
class: inverse, center, middle

# 1. å‘é‡

.font150[(vectors)]

---
class: middle
background-image: url(imgs/vectors-01.png)
background-size: 80%
background-position: 50% 50%

---

### 1.1 åŸå­å‘é‡ &gt;&gt; é€»è¾‘å‘é‡ï¼ˆ_logical vector_ï¼‰



.full-width[.content-box-blue.bold.font120.note[é€»è¾‘å‘é‡çš„å…ƒç´ åªæœ‰ä¸‰ç§å¯èƒ½å–å€¼ï¼š`TRUE | FALSE | NA`]]

--

.full-width[.content-box-blue.bold.font120.note[é€»è¾‘å‘é‡é€šå¸¸ç”±æ¯”è¾ƒè¿ç®—ï¼ˆ`?Comparison`ï¼‰ç”Ÿæˆ]]


```r
1:10 %% 3 == 0
```

```
#&gt;  [1] FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE
```

--

.full-width[.content-box-blue.bold.font120.note[å½“ç„¶ä¹Ÿå¯ä»¥ç”¨ `c()` ç›´æ¥æ„é€ é€»è¾‘å‘é‡]]


```r
c(TRUE, FALSE, NA, T, F)   # c(): Combine Values into a Vector or List
```

```
#&gt; [1]  TRUE FALSE    NA  TRUE FALSE
```

--

.full-width[.content-box-blue.bold.font120.warning[å¼ºçƒˆå»ºè®®ä¸è¦ä½¿ç”¨ `TRUE` å’Œ `FALSE` çš„ç¼©å†™å½¢å¼ `T` å’Œ `F`]]


```r
T &lt;- FALSE; F &lt;- 2; c(TRUE, FALSE, NA, T, F); rm(list = c("T", "F"))
```

```
#&gt; [1]  1  0 NA  0  2
```

---

### 1.1 åŸå­å‘é‡ &gt;&gt; æ•°å€¼å‘é‡ï¼ˆ_numeric vector_ï¼‰

.full-width[.content-box-blue.bold.font120.note[æ•°å€¼å‘é‡åŒ…æ‹¬æ•´æ•°å‘é‡ï¼ˆintegerï¼‰å’Œå®æ•°å‘é‡ï¼ˆdoubleï¼‰]]

--

.pull-left.code100[

.full-width[.content-box-blue.bold.font120.note[é»˜è®¤ä¸ºå®æ•°ï¼Œé™¤éåœ¨æ•´æ•°ååŠ ä¸Š `L`]]

.code80[

```r
typeof(1);typeof(1L);typeof(1.5L)
```

```
#&gt; [1] "double"
```

```
#&gt; [1] "integer"
```

```
#&gt; [1] "double"
```
]

.full-width[.content-box-blue.bold.font120.warning[R ç”¨åŒç²¾åº¦æ¥å­˜å‚¨å®æ•°å‘é‡çš„æ•°å€¼ï¼Œä½†åœ¨å¾ˆå¤šæƒ…å†µä¸‹åªæ˜¯è¿‘ä¼¼å€¼ï¼Œå› æ­¤ä¸è¦ç”¨ `==` ç›´æ¥æ¯”è¾ƒå®æ•°å‘é‡çš„å–å€¼ï¼Œè€Œç”¨ `dplyr::near()`]]

]

--

.pull-right[

.full-width[.content-box-blue.bold.font120.info[æ•´æ•°å‘é‡åªæœ‰ä¸€ä¸ªç‰¹æ®Šå€¼ `NA`ï¼Œè€Œå®æ•°å‘é‡åˆ™æœ‰å››ä¸ªç‰¹æ®Šå€¼ `NA`ã€`NaN`ã€`Inf` å’Œ `-Inf`ï¼›ç”¨ `is.*()` è€Œä¸è¦ç›´æ¥ç”¨ `==` æ£€æµ‹è¿™äº›ç‰¹æ®Šå€¼]]

.code100[

```r
c(-1, 0, 1, NA) / 0  # 4ä¸ªç‰¹æ®Šå€¼
#&gt; [1] -Inf  NaN  Inf   NA
```
]

|                  | `0` |`Inf`|`NA` |`NaN`|
|:-----------------|:---:|:---:|:---:|:---:|
| `is.finite()`    |  âˆš  |     |     |     |
| `is.infinite()`  |     |  âˆš  |     |     |
| `is.na()`        |     |     |  âˆš  |  âˆš  |
| `is.nan()`       |     |     |     |  âˆš  |

]

---

### 1.1 åŸå­å‘é‡ &gt;&gt; å­—ç¬¦å‘é‡ï¼ˆ_charater vector_ï¼‰

.pull-left.code110[

.full-width[.content-box-blue.bold.font120.note[å­—ç¬¦å‘é‡çš„æ¯ä¸ªå…ƒç´ ç”±å­—ç¬¦ä¸²æ„æˆï¼Œå¯ç”¨æ¥è¡¨ç¤ºä»»æ„æ•°æ®]]


```r
c("FALSE", "123L", "123.45", 
  "a string", "1 + 2i", 
  "3a 29",
  "2018-11-13 10:00 CST")
```

```
#&gt; [1] "FALSE"               
#&gt; [2] "123L"                
#&gt; [3] "123.45"              
#&gt; [4] "a string"            
#&gt; [5] "1 + 2i"              
#&gt; [6] "3a 29"               
#&gt; [7] "2018-11-13 10:00 CST"
```

]

--

.pull-right.code110[

.full-width[.content-box-blue.bold.font120.info[R ä½¿ç”¨å…¨å±€å­—ç¬¦ä¸²æ± ï¼Œè¿™æ„å‘³ç€æ¯ä¸ªå­—ç¬¦ä¸²åœ¨å†…å­˜ä¸­åªå­˜ä¸€æ¬¡]]


```r
x &lt;- "This is a long string."
object.size(x)
# lobstr::obj_size(x)
```

```
#&gt; 136 bytes
```


```r
y &lt;- rep(x, 1000)
object.size(y)
```

```
#&gt; 8128 bytes
```

```r
# 8 * 1000 + 128 B
```

]

---

### 1.1 åŸå­å‘é‡ &gt;&gt; ç±»å‹è½¬æ¢

.full-width[.content-box-blue.bold.font120.note[æ˜¾æ€§è½¬æ¢ï¼š`as.logical()` | `as.integer()` | `as.double()` | `as.character()`]]
--

.code90[

```r
as.integer(c("1", "2")) + c(10, 11)   ## [1] 11 13
```
]

--

.pull-left.font120[

.full-width[.content-box-blue.bold.note[éšæ€§è½¬æ¢ï¼šå½“å‘é‡ç”¨äºéœ€è¦ç‰¹å®šç±»å‹è¾“å…¥çš„å‡½æ•°æ—¶ï¼ŒR ä¼šè‡ªåŠ¨å°†å‘é‡è½¬æ¢ä¸ºç‰¹å®šç±»å‹.red[ï¼ˆä½†éæ€»æ˜¯å¦‚æ­¤ï¼‰]]]


```r
x &lt;- sample(1:20, 100, 
            replace = TRUE)
# what proportion &gt; 10?
mean(x &gt; 10)
```

```
#&gt; [1] 0.46
```

```r
x + "3"  # ä½†å¹¶éæ€»æ˜¯å¦‚æ­¤
```

```
#&gt; Error in x + "3": non-numeric argument to binary operator
```

]

--

.pull-right.font120[

.full-width[.content-box-blue.bold.note[éšæ€§è½¬æ¢ï¼šå½“ç”¨ `c()` è”ç»“ä¸åŒç±»å‹çš„å‘é‡æ—¶ï¼ŒR ä¼šå¥—ç”¨æœ€å¤æ‚çš„ç±»å‹]]


```r
c(FALSE, 1L, 1.5, "a", 1 + 1i, raw(2))
```

```
#&gt; [1] "FALSE" "1"     "1.5"   "a"    
#&gt; [5] "1+1i"  "00"    "00"
```


```r
1 == "1"; -1 &lt; FALSE; "one" &lt; 2
```

```
#&gt; [1] TRUE
#&gt; [1] TRUE
#&gt; [1] FALSE
```

]

---

### 1.1 åŸå­å‘é‡ &gt;&gt; ç±»å‹æ£€æµ‹

.pull-left[

&lt;br&gt;

.full-width[.content-box-blue.bold.font120.info[å°½ç®¡ R çš„ `base` åŒ…æä¾›å¾ˆå¤šç±»å‹æ£€æµ‹å‡½æ•°ï¼ˆå¦‚ `is.logical()` ï¼‰ï¼Œä½†å»ºè®®ä½¿ç”¨ .bold[`purrr`] åŒ…ä¸­ç”¨æ³•æ›´åŠ ä¸€è‡´çš„ç›¸å…³å‡½æ•° &lt;sup&gt;.red[*]&lt;/sup&gt;]]

]

.pull-right.font120[

&lt;br&gt;

|                  | lgl | int | dbl | chr | list |
|:-----------------|:---:|:---:|:---:|:---:|:----:|
| `is_logical()`   |  âˆš  |     |     |     |      |
| `is_integer()`   |     |  âˆš  |     |     |      |
| `is_double()`    |     |     |  âˆš  |     |      |
| `is_numeric()`   |     |  âˆš  |  âˆš  |     |      |
| `is_character()` |     |     |     |  âˆš  |      |
| `is_atomic()`    |  âˆš  |  âˆš  |  âˆš  |  âˆš  |      |
| `is_list()`      |     |     |     |     |  âˆš   |
| `is_vector()`    |  âˆš  |  âˆš  |  âˆš  |  âˆš  |  âˆš   |

]


.footnote.red[*ï¼šäº‹å®ä¸Šè¿™äº›å‡½æ•°ç°åœ¨éƒ½ import è‡ª `rlang` åŒ…]

---

### 1.1 åŸå­å‘é‡ &gt;&gt; å¾ªç¯è§„åˆ™ï¼ˆ_recycling_ï¼‰

.full-width[.content-box-blue.bold.font120.note[R ä¸ä»…ä¼šéšæ€§åœ°è½¬æ¢å‘é‡ç±»å‹ï¼Œ R ä¸­çš„å‘é‡åŒ–å‡½æ•°è¿˜ä¼šé‡‡ç”¨å¾ªç¯è§„åˆ™è‡ªåŠ¨è½¬æ¢å‘é‡çš„é•¿åº¦ï¼Œé€šè¿‡é‡å¤å°†è¾ƒçŸ­å‘é‡çš„é•¿åº¦å¢åŠ è‡³è¾ƒé•¿å‘é‡çš„é•¿åº¦]]
--

.code100[

```r
runif(10) &gt; 0.5  # Rä¸­ä¸å­˜åœ¨æ‰€è°“çš„æ ‡é‡ï¼ˆscalarï¼‰ï¼Œå®ƒä»¬åªæ˜¯é•¿åº¦ä¸º1çš„å‘é‡
```

```
#&gt;  [1] FALSE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE FALSE  TRUE
```
]

--

.pull-left.code100[
.full-width[.content-box-blue.bold.font120.info[å½“è¾ƒé•¿å‘é‡ä¸æ˜¯è¾ƒçŸ­å‘é‡çš„æ•´æ•°å€æ—¶ï¼ŒR ç…§æ ·ä¼šè¿›è¡Œè½¬æ¢ï¼Œä½†ä¼šæœ‰ä¸ª .red.font90[Warning message]]]


```r
1:5 + c(1, NA)
```

```
#&gt; Warning in 1:5 + c(1, NA): longer
#&gt; object length is not a multiple of
#&gt; shorter object length
```

```
#&gt; [1]  2 NA  4 NA  6
```

]

--

.pull-right.code100[

.full-width[.content-box-blue.bold.font120.info[å½“å‘é‡çš„é•¿çŸ­ä¸ä¸€æ—¶ï¼ˆæ ‡é‡é™¤å¤–ï¼‰ï¼Œè¦æ±‚æ›´ä¸¥æ ¼çš„ `tidyverse` åˆ™ä¼šæŠ›å‡º Errorï¼Œåœæ­¢è¿è¡Œ]]


```r
tibble(x = 1:4, y = 1:2)
```

```
#&gt; Error:
#&gt; ! Tibble columns must have compatible sizes.
#&gt; â€¢ Size 4: Existing data.
#&gt; â€¢ Size 2: Column `y`.
#&gt; â„¹ Only values of size one are recycled.
```

]

---
layout: true

### 1.1 åŸå­å‘é‡ &gt;&gt; ç”¨ `[` å‡½æ•°é€‰å–å…ƒç´ ï¼ˆ_subsetting_ï¼‰

---

.full-width[.content-box-blue.bold.font120[æ–¹æ³•ä¸€ï¼šç”¨.red[æ•´æ•°å‘é‡]é€‰å–å…ƒç´ ]]

--


```r
x &lt;- c("one", "two", "three", "four", "five")

x[c(1, 1, 3, 2, 2, 5)]    # æ­£æ•´æ•°è¡¨ç¤ºæå–ç›¸åº”ä½ç½®çš„å…ƒç´ ï¼Œå¯é‡å¤ï¼›ä½ç½®ç´¢å¼•ä»1å¼€å§‹
```

```
#&gt; [1] "one"   "one"   "three" "two"   "two"   "five"
```
--


```r
x[c(-1, -3, -5)]          # è´Ÿæ•´æ•°è¡¨ç¤ºå‰”é™¤ç›¸åº”ä½ç½®çš„å…ƒç´ 
```

```
#&gt; [1] "two"  "four"
```
--


```r
x[c(1, -3, 5)]            # ä¸å¯æ··ç”¨æ­£æ•´æ•°å’Œè´Ÿæ•´æ•°
```

```
#&gt; Error in x[c(1, -3, 5)]: only 0's may be mixed with negative subscripts
```
--


```r
x[0]                      # è¿”å›ç©ºå€¼ï¼ˆä½†éNULLï¼‰
```

```
#&gt; character(0)
```

--


```r
x[c(1.2, 2.3, 3.4, 4.5, 5.6, 6.7)]  # æƒ³æƒ³ï¼Œè¿™ä¼šè¿”å›ä»€ä¹ˆï¼Ÿ
```

---

.pull-left.code100[

.full-width[.content-box-blue.bold.font120[æ–¹æ³•äºŒï¼šç”¨.red[é€»è¾‘å‘é‡]é€‰å–å…ƒç´ ï¼Œä¿ç•™é€»è¾‘å‘é‡å–å€¼ä¸º `TRUE` ä½ç½®çš„å…ƒç´ ]]


```r
x &lt;- c(10, 3, NA, 5)

x[!is.na(x)]  # æå–éç¼ºå¤±å€¼
```

```
#&gt; [1] 10  3  5
```


```r
# é€»è¾‘å‘é‡å–å€¼ä¸ºNAçš„ä½ç½®ä¹Ÿä¼šè¢«
# ä¿ç•™ä¸‹æ¥ï¼Œç›¸åº”å…ƒç´ çš„å–å€¼ä¹Ÿä¸ºNA
x[x %% 2 == 0] # æå–å¶æ•°æˆ–ç¼ºå¤±å€¼
```

```
#&gt; [1] 10 NA
```
]

--

.pull-right.code100[

.full-width[.content-box-blue.bold.font120[æ–¹æ³•ä¸‰ï¼šç”¨.red[å­—ç¬¦å‘é‡]é€‰å–å‘½åå‘é‡çš„å…ƒç´ ]]


```r
# å‘½åå‘é‡ï¼šåˆ›å»ºæ—¶ç›´æ¥å‘½å
abc &lt;- c(a = 1, b = 2, c = 3)
# å‘½åå‘é‡ï¼šäº‹åå†å‘½å
abc &lt;- 1:3
abc &lt;- purrr::set_names(        
  # ä¹Ÿå¯ç”¨baseåŒ…çš„setNames()
  x = abc,
  nm = c("a", "b", "c")
)
```


```r
# æå–ç›¸åº”å‘½åçš„å…ƒç´ 
abc[c("a", "c", "b", "a", "d")]
```

```
#&gt;    a    c    b    a &lt;NA&gt; 
#&gt;    1    3    2    1   NA
```

]

---

.pull-left.code110[

.full-width[.content-box-blue.bold.font120[æ–¹æ³•å››ï¼š.red[ç©ºå‘é‡]è¡¨ç¤ºé€‰å–å…¨éƒ¨å…ƒç´ ]]


```r
abc
```

```
#&gt; a b c 
#&gt; 1 2 3
```

```r
abc[]
```

```
#&gt; a b c 
#&gt; 1 2 3
```

]

--

.pull-right.code110[

.full-width[.content-box-blue.bold.font120[æœ€åï¼Œ&amp;#91; æœ‰ä¸ªç‰¹æ®Šçš„å˜å‹  &amp;#91;&amp;#91;ï¼Œåè€….red[åªè¿”å›å•ä¸ªå…ƒç´ ï¼Œä¸”ä¼šä¸¢å¼ƒå…ƒç´ åç§°]ã€‚å½“ä½ æƒ³è¦æ˜ç¡®è¡¨è¾¾ä½ åªéœ€è¦ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæ¨èä½¿ç”¨ &amp;#91;&amp;#91;ã€‚]]
   

```r
abc["a"]    # abc[1]
```

```
#&gt; a 
#&gt; 1
```

```r
abc[["a"]]  # abc[[1]]
```

```
#&gt; [1] 1
```

]

---
layout: true

### 1.2 åˆ—è¡¨ &gt;&gt; åŸºç¡€

---
.full-width[.content-box-blue.bold.font120.note[å’ŒåŸå­å‘é‡ä¸åŒï¼Œåˆ—è¡¨å¯åŒæ—¶åŒ…å«.red[å¤šç§ç±»å‹ï¼ˆtypeï¼‰çš„å…ƒç´ ï¼ˆç”šè‡³åµŒå¥—ä¸‹ä¸€çº§çš„åˆ—è¡¨ï¼‰]ï¼Œè¿™ä½¿å¾—åˆ—è¡¨é€‚åˆç”¨æ¥å­˜å‚¨æ··åˆæˆ–æ ‘çŠ¶ç»“æ„çš„æ•°æ®]]

--

.pull-left.code90[

```r
a &lt;- list(a = 1:3, b = "a string",
          c = pi, d = list(-1, -5))
a  # print(a)
```

```
#&gt; $a
#&gt; [1] 1 2 3
#&gt; 
#&gt; $b
#&gt; [1] "a string"
#&gt; 
#&gt; $c
#&gt; [1] 3.14
#&gt; 
#&gt; $d
#&gt; $d[[1]]
#&gt; [1] -1
#&gt; 
#&gt; $d[[2]]
#&gt; [1] -5
```
]

--

.pull-right.code90[

.full-width[.content-box-blue.bold.font120.info[é™¤äº†ç›´æ¥ `print()` åˆ—è¡¨çš„å†…å®¹ä¹‹å¤–ï¼Œæ›´æ¨èä½¿ç”¨ `str()` å‡½æ•°æ¥æŸ¥çœ‹åˆ—è¡¨çš„ç»“æ„æˆ–ä½¿ç”¨ RStudio's Environment é¢æ¿ä¸­çš„å¯¹è±¡æµè§ˆå™¨]]


```r
str(a)
```

```
#&gt; List of 4
#&gt;  $ a: int [1:3] 1 2 3
#&gt;  $ b: chr "a string"
#&gt;  $ c: num 3.14
#&gt;  $ d:List of 2
#&gt;   ..$ : num -1
#&gt;   ..$ : num -5
```
]


---
layout: true

### 1.2 åˆ—è¡¨ &gt;&gt; æå–åˆ—è¡¨å…ƒç´ ï¼ˆ_subsetting_ï¼‰

---

.pull-left.code90[

.full-width[.content-box-blue.bold.font120[æ–¹æ³•ä¸€ï¼šç”¨ &amp;#91; æå–å­åˆ—è¡¨ï¼Œ.red[æ€»æ˜¯è¿”å›åˆ—è¡¨]]]


```r
# å¯ç”¨ æ•°å€¼|å­—ç¬¦|é€»è¾‘å‘é‡ æå–ï¼Œå¦‚a[1:2]
# æˆ–a[c(TRUE, TRUE, FALSE, FALSE)]
a[c("a", "b")] %&gt;% str()
```

```
#&gt; List of 2
#&gt;  $ a: int [1:3] 1 2 3
#&gt;  $ b: chr "a string"
```

```r
# å°½ç®¡åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œä½†ä»æ˜¯åˆ—è¡¨
a[3] %&gt;% str()
```

```
#&gt; List of 1
#&gt;  $ c: num 3.14
```

```r
a[4] %&gt;% str() 
```

```
#&gt; List of 1
#&gt;  $ d:List of 2
#&gt;   ..$ : num -1
#&gt;   ..$ : num -5
```

]

--

.pull-right.code90[

.full-width[.content-box-blue.bold.font120[æ–¹æ³•äºŒï¼šç”¨ &amp;#91;&amp;#91; æå–å•ä¸€åˆ—è¡¨å…ƒç´ ï¼Œ.red[å¹¶ä»åˆ—è¡¨ä¸­ç§»é™¤ä¸€ä¸ªå±‚çº§]]]


```r
a[[3]] %&gt;% str()
```

```
#&gt;  num 3.14
```

```r
a[[4]] %&gt;% str()
```

```
#&gt; List of 2
#&gt;  $ : num -1
#&gt;  $ : num -5
```

.full-width[.content-box-blue.bold.font120[æ–¹æ³•ä¸‰ï¼š`$` å¤§è‡´ç­‰åŒ &amp;#91;&amp;#91; ï¼Œæ›´æ–¹ä¾¿åœ°æå–ä¸€ä¸ª.red[å‘½ååˆ—è¡¨]çš„å…ƒç´ ]]


```r
a$a  # a[["a"]]
```

```
#&gt; [1] 1 2 3
```
]

---

.pull-left[

&lt;img src="imgs/lists-subsetting-1.png" width="90%" style="display: block; margin: auto;" /&gt;

]

--

.pull-right[

&lt;img src="imgs/lists-subsetting-2.png" width="95%" style="display: block; margin: auto;" /&gt;

.footnote[.red[
- å›¾ä¸­åœ†è§’æ–¹æ¡†ä»£è¡¨**åˆ—è¡¨**ï¼Œè€Œæ™®é€šæ–¹æ¡†ä»£è¡¨**åŸå­å‘é‡**
- å­å…ƒç´ è¢«åŒ…å›´åœ¨çˆ¶å…ƒç´ ä¹‹å†…
]]

]

---
layout: true

### 1.3 å‘é‡å±æ€§ï¼ˆ_attributes_ï¼‰

---

.full-width[.content-box-blue.bold.font120.note[æˆ‘ä»¬å¯ä»¥é€šè¿‡.red[å‘é‡å±æ€§]æ¥ç»™å‘é‡å¢åŠ ä»»æ„çš„é¢å¤–å…ƒæ•°æ®ï¼ˆmetadataï¼‰ï¼Œè€Œå‘é‡å±æ€§å¯è¢«è§†ä½œé™„åŠ åœ¨å‘é‡ä¸Šçš„.red[å‘½ååˆ—è¡¨]]]

--

.full-width[.content-box-blue.bold.font120.note[é€šè¿‡ `attr()` æ¥è®¾å®šæˆ–è·å–å‘é‡çš„å±æ€§ï¼›é€šè¿‡ `attributes()` æ¥è·å–å…¨éƒ¨æˆ–æ‰¹é‡è®¾ç½®å‘é‡çš„å±æ€§ä¿¡æ¯]]

--

.pull-left.code100[


```r
x &lt;- 1:10
attr(x, "source")
```

```
#&gt; NULL
```

```r
attributes(x) &lt;- list(
  source = c("Wind", "GTA"), 
  date   = Sys.Date()
)
attr(x, "cleaned_by") &lt;- "Y.Z"
```

]

--

.pull-right.code100[

```r
attributes(x)
```

```
#&gt; $source
#&gt; [1] "Wind" "GTA" 
#&gt; 
#&gt; $date
#&gt; [1] "2022-10-06"
#&gt; 
#&gt; $cleaned_by
#&gt; [1] "Y.Z"
```
]

---

.full-width[.content-box-blue.bold.font120.note[R ä¸­çš„å‘é‡é™¤äº†æˆ‘ä»¬ä¹‹å‰æåˆ°è¿‡çš„â€œç±»å‹ `typeof()`â€å’Œâ€œé•¿åº¦ `length()`â€ä¸¤ä¸ªæ€§è´¨ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸‰ä¸ª.red[åŸºç¡€]å±æ€§ï¼šåç§°ã€ç»´åº¦å’Œç±»]]

--

.pull-left.code100[
.full-width[.content-box-blue.bold.font120[â‘ åç§°å±æ€§ï¼ˆ_names_ï¼‰ï¼šç»™å‘é‡å…ƒç´ å‘½å]]


```r
# å‘½åå‘é‡
x = c(1, 2, 3)
*names(x) &lt;- c("a", "b", "c")
x
```

```
#&gt; a b c 
#&gt; 1 2 3
```

```r
names(x)   # attr(x, "names")
```

```
#&gt; [1] "a" "b" "c"
```
]

--

.pull-right.code90[

.full-width[.content-box-blue.bold.font120[â‘¡ç»´åº¦å±æ€§ï¼ˆ_dimensions_ï¼‰ï¼šå°†å‘é‡â€œæ”¹é€ â€ä¸ºçŸ©é˜µæˆ–æ•°ç»„]]


```r
x &lt;- 1:10
*dim(x) &lt;- c(2, 5) # ?matrix
x
```

```
#&gt;      [,1] [,2] [,3] [,4] [,5]
#&gt; [1,]    1    3    5    7    9
#&gt; [2,]    2    4    6    8   10
```

```r
class(x); dim(x)  # attr(x, "dim")
```

```
#&gt; [1] "matrix" "array"
```

```
#&gt; [1] 2 5
```
]

---

.full-width[.content-box-blue.bold.font120[â‘¢ç±»å±æ€§ï¼ˆ_class_ï¼‰ï¼šæ§åˆ¶.red[æ³›å‹å‡½æ•°ï¼ˆ_generic functions_ï¼‰]çš„è¡Œä¸ºæ–¹å¼ï¼Œè¿™æ˜¯ R è¯­è¨€ç”¨æ¥å®ç°â€œS3 é¢å‘å¯¹è±¡ç³»ç»Ÿâ€çš„æ–¹æ³•]]

--
.pull-left.code100[


```r
# as.Date()æ˜¯ä¸ªå…¸å‹çš„æ³›å‹å‡½æ•°
# åˆ—å°as.Date()å‡½æ•°çš„æºä»£ç 
as.Date
```

```
#&gt; function (x, ...) 
*#&gt; UseMethod("as.Date")
#&gt; &lt;bytecode: 0x000001759557f710&gt;
#&gt; &lt;environment: namespace:base&gt;
```

]

--

.pull-right.code100[

.font110[**ç»“æœæ˜¾ç¤º**ï¼Œ`as.Date()` å‡½æ•°è°ƒç”¨ `UseMethod()`ï¼Œè¿™å°±æ„å‘³ç€ `as.Date()` æ˜¯ä¸ªæ³›å‹å‡½æ•°ï¼Œå®ƒå°†æ ¹æ®ç¬¬ä¸€ä¸ªå‚æ•° `x` çš„ç±»æ¥ç¡®å®šè¯¥è°ƒç”¨å“ªä¸ªç‰¹å®šæ–¹æ³•ï¼ˆ`method`ï¼‰ã€‚]


```r
# æŸ¥çœ‹as.Date()æ³›å‹å‡½æ•°è°ƒç”¨çš„å…¨éƒ¨æ–¹æ³•
methods("as.Date")
```

```
#&gt; [1] as.Date.character   as.Date.default    
#&gt; [3] as.Date.factor      as.Date.numeric    
#&gt; [5] as.Date.POSIXct     as.Date.POSIXlt    
#&gt; [7] as.Date.vctrs_sclr* as.Date.vctrs_vctr*
#&gt; see '?methods' for accessing help and source code
```

]

---

.code90[


```r
# æŸ¥çœ‹as.Date()å‡½æ•°æŒ‡å®šç±»ï¼ˆå¦‚numericï¼‰æ‰€å®ç°çš„å…·ä½“æ–¹æ³•
getS3method("as.Date", "numeric")
# ç”±äºas.Date.numeric()æ˜¯å¯¼å‡ºå‡½æ•°ï¼Œä¹Ÿå¯ç”¨as.Date.numericç›´æ¥æŸ¥çœ‹å…¶ä»£ç 
```

```
#&gt; function (x, origin, ...) 
#&gt; {
#&gt;     if (missing(origin)) {
#&gt;         if (!length(x)) 
#&gt;             return(.Date(numeric()))
#&gt;         if (!any(is.finite(x))) 
#&gt;             return(.Date(x))
#&gt;         stop("'origin' must be supplied")
#&gt;     }
#&gt;     as.Date(origin, ...) + x
#&gt; }
#&gt; &lt;bytecode: 0x000001759d68d618&gt;
#&gt; &lt;environment: namespace:base&gt;
```

]

--

.font120.info[è®°ä½ï¼Œ**ç±»**å’Œ**æ³›å‹å‡½æ•°**æ˜¯`R`ä¸­éå¸¸é‡è¦çš„æ¦‚å¿µï¼Œæœ‰å¾ˆå¤šå¸¸è§çš„å‡½æ•°éƒ½æ˜¯æ³›å‹å‡½æ•°ï¼Œå…·ä½“å¦‚ `print()`ã€`summary()`ã€`mean()`ã€&amp;#91;ã€&amp;#91;&amp;#91; å’Œ `$` ç­‰ã€‚]


---
layout: true

### 1.4 å¢å¼ºå‘é‡ï¼ˆ_augmented vectors_ï¼‰

---

.full-width[.content-box-blue.bold.font120[å¢å¼ºå‘é‡â‘ ï¼šå› å­å‘é‡ï¼ˆ_factors_ï¼‰]]

--

.pull-left.code90[


```r
(x &lt;- factor(c("A", "B", "A"), 
        levels = c("A", "B", "C")))
```

```
#&gt; [1] A B A
#&gt; Levels: A B C
```

```r
typeof(x)     # è·å–å‘é‡xçš„ç±»å‹
```

```
#&gt; [1] "integer"
```

```r
attributes(x) # è·å–å‘é‡xçš„å±æ€§
```

```
#&gt; $levels
#&gt; [1] "A" "B" "C"
#&gt; 
#&gt; $class
#&gt; [1] "factor"
```
]

--

.pull-right.code100[

```r
# è·å–xå‘é‡levelså±æ€§çš„ä¾¿æ·å‡½æ•°
levels(x)
```

```
#&gt; [1] "A" "B" "C"
```

```r
# è·å–xå‘é‡classå±æ€§çš„ä¾¿æ·å‡½æ•°
class(x)
```

```
#&gt; [1] "factor"
```

```r
unclass(x)  # ç§»é™¤å‘é‡xçš„ç±»å±æ€§
```

```
#&gt; [1] 1 2 1
#&gt; attr(,"levels")
#&gt; [1] "A" "B" "C"
```
]

---

.full-width[.content-box-blue.bold.font120[å¢å¼ºå‘é‡â‘¡ï¼šæ—¥æœŸå‘é‡å’Œæ—¥æœŸ-æ—¶é—´å‘é‡ï¼ˆ_dates_ and _date-times_ï¼‰]]

--

.pull-left.code90[

```r
(x &lt;- as.Date("1971-01-01"))
```

```
#&gt; [1] "1971-01-01"
```

```r
typeof(x)
```

```
#&gt; [1] "double"
```

```r
attributes(x)
```

```
#&gt; $class
#&gt; [1] "Date"
```

```r
unclass(x)   # as.integer(x)
```

```
#&gt; [1] 365
```
]
--

.pull-right.code90[

```r
(x &lt;- lubridate::ymd_hm(
        "1970-01-01 01:00"))
```

```
#&gt; [1] "1970-01-01 01:00:00 UTC"
```

```r
typeof(x); as.double(x) # unclass(x)
```

```
#&gt; [1] "double"
```

```
#&gt; [1] 3600
```

```r
attributes(x)
```

```
#&gt; $class
#&gt; [1] "POSIXct" "POSIXt" 
#&gt; 
#&gt; $tzone
#&gt; [1] "UTC"
```
]

---

.full-width[.content-box-blue.bold.font120[å¢å¼ºå‘é‡â‘¡ï¼šæ—¥æœŸå‘é‡å’Œæ—¥æœŸ-æ—¶é—´å‘é‡ï¼ˆ_dates_ and _date-times_ï¼‰]]

--

.code90[

```r
(y &lt;- as.POSIXlt(x))  # built on top of named lists
```

```
#&gt; [1] "1970-01-01 01:00:00 UTC"
```
]

--

.pull-left.code90[


```r
typeof(y)
```

```
#&gt; [1] "list"
```

```r
attributes(y)
```

```
#&gt; $names
#&gt; [1] "sec"   "min"   "hour"  "mday"  "mon"  
#&gt; [6] "year"  "wday"  "yday"  "isdst"
#&gt; 
#&gt; $class
#&gt; [1] "POSIXlt" "POSIXt" 
#&gt; 
#&gt; $tzone
#&gt; [1] "UTC"
```

]

--

.pull-right.code90[


```r
unclass(y) %&gt;% str
```

```
#&gt; List of 9
#&gt;  $ sec  : num 0
#&gt;  $ min  : int 0
#&gt;  $ hour : int 1
#&gt;  $ mday : int 1
#&gt;  $ mon  : int 0
#&gt;  $ year : int 70
#&gt;  $ wday : int 4
#&gt;  $ yday : int 0
#&gt;  $ isdst: int 0
#&gt;  - attr(*, "tzone")= chr "UTC"
```

```r
y$year   # æå–åˆ—è¡¨yçš„"year"å…ƒç´ 
```

```
#&gt; [1] 70
```
]

---

.full-width[.content-box-blue.bold.font120[å¢å¼ºå‘é‡â‘¢ï¼š`dataframe` å’Œ `tibble`]]

--

.pull-left.code90[


```r
df &lt;- data.frame(
  x = LETTERS[1:3], 
  y = 0:2, `:)` = runif(3))
typeof(df)
```

```
#&gt; [1] "list"
```


```r
attributes(df)
```

```
#&gt; $names
*#&gt; [1] "x"   "y"   "X.."
#&gt; 
#&gt; $class
#&gt; [1] "data.frame"
#&gt; 
#&gt; $row.names
#&gt; [1] 1 2 3
```

]

--

.pull-right.code90[


```r
tb &lt;- tibble(
  x = LETTERS[1:3], 
  y = 0:2, `:)` = runif(3))
typeof(tb)
```

```
#&gt; [1] "list"
```


```r
attributes(tb)
```

```
#&gt; $class
*#&gt; [1] "tbl_df"     "tbl"        "data.frame"
#&gt; 
#&gt; $row.names
#&gt; [1] 1 2 3
#&gt; 
#&gt; $names
*#&gt; [1] "x"  "y"  ":)"
```

]

---

.full-width[.content-box-blue.bold.font120[å¢å¼ºå‘é‡â‘¢ï¼š`dataframe` å’Œ `tibble` &lt;sup&gt;.red[*]&lt;/sup&gt;]]

.footnote.red[*ï¼š`dataframe` å’Œ `tibble` çš„åº•å±‚æ˜¯ä¸ª `list`ï¼Œæ¯åˆ—æ˜¯ `list` çš„ä¸€ä¸ªå…ƒç´ ï¼Œä½†è¦æ±‚æ¯åˆ—éƒ½å¿…é¡»æ˜¯ç­‰é•¿çš„å‘é‡]

--

.pull-left.code90[

```r
# çœ‹çœ‹dfåº•å±‚çš„list
unclass(df) %&gt;% str()
```

```
#&gt; List of 3
#&gt;  $ x  : chr [1:3] "A" "B" "C"
#&gt;  $ y  : int [1:3] 0 1 2
#&gt;  $ X..: num [1:3] 0.6216 0.0929 0.0138
#&gt;  - attr(*, "row.names")= int [1:3] 1 2 3
```

```r
df  # åˆ—å°dfçš„å†…å®¹
```

```
#&gt;   x y    X..
#&gt; 1 A 0 0.6216
#&gt; 2 B 1 0.0929
#&gt; 3 C 2 0.0138
```
]

--

.pull-right.code90[

```r
# çœ‹çœ‹tbåº•å±‚çš„list
unclass(tb) %&gt;% str()
```

```
#&gt; List of 3
#&gt;  $ x : chr [1:3] "A" "B" "C"
#&gt;  $ y : int [1:3] 0 1 2
#&gt;  $ :): num [1:3] 0.1062 0.1188 0.0625
#&gt;  - attr(*, "row.names")= int [1:3] 1 2 3
```


```r
tb  # åˆ—å°tbçš„å†…å®¹
```

```
*#&gt; # A tibble: 3 Ã— 3
#&gt;   x         y   `:)`
*#&gt;   &lt;chr&gt; &lt;int&gt;  &lt;dbl&gt;
#&gt; 1 A         0 0.106 
#&gt; 2 B         1 0.119 
#&gt; 3 C         2 0.0625
```
]

---

.full-width[.content-box-blue.bold.font120[å¢å¼ºå‘é‡â‘¢ï¼š`dataframe` å’Œ `tibble`]]

--

.pull-left.code100[

```r
# æå–tbçš„ç¬¬1åˆ—å’Œç¬¬3åˆ—
tb[c(1, 3)]
```

```
#&gt; # A tibble: 3 Ã— 2
#&gt;   x       `:)`
#&gt;   &lt;chr&gt;  &lt;dbl&gt;
#&gt; 1 A     0.106 
#&gt; 2 B     0.119 
#&gt; 3 C     0.0625
```
]

--

.pull-right.code100[


```r
# æå–ç¬¬2åˆ—ï¼Œä»ç»“æœä¸ºtibble
# ä¹Ÿå¯ç”¨tb[2]
tb["y"]
```

```
#&gt; # A tibble: 3 Ã— 1
#&gt;       y
#&gt;   &lt;int&gt;
#&gt; 1     0
#&gt; 2     1
#&gt; 3     2
```

```r
# æå–ç¬¬2åˆ—ï¼Œä½†ç»“æœä¸ºå‘é‡
# ä¹Ÿå¯ç”¨tb[[2]]æˆ–tb[["y"]]
tb$y
```

```
#&gt; [1] 0 1 2
```

]

---

.full-width[.content-box-blue.bold.font120[å¢å¼ºå‘é‡â‘¢ï¼š`dataframe` å’Œ `tibble`]]

.code100[

```r
# tbï¼ˆdfï¼‰å…·æœ‰ç±»ä¼¼çŸ©é˜µï¼ˆmatrixï¼‰ç±»çš„æ€§è´¨
# tbçš„ç»´åº¦â€œå±æ€§â€
dim(tb)
```

```
#&gt; [1] 3 3
```
]

--

.pull-left.code100[

```r
# ç”¨æå–å­çŸ©é˜µçš„æ–¹æ³•æå–å­é›†
tb[c(1, 3), c("y", ":)")]
```

```
#&gt; # A tibble: 2 Ã— 2
#&gt;       y   `:)`
#&gt;   &lt;int&gt;  &lt;dbl&gt;
#&gt; 1     0 0.106 
#&gt; 2     2 0.0625
```
]

--

.pull-right.code100[

```r
# ç”¨dplyrå·¥å…·å¯èƒ½æ›´ä¸ºç›´è§‚
tb %&gt;% slice(c(1, 3)) %&gt;% 
  select(y, ":)")
```

```
#&gt; # A tibble: 2 Ã— 2
#&gt;       y   `:)`
#&gt;   &lt;int&gt;  &lt;dbl&gt;
#&gt; 1     0 0.106 
#&gt; 2     2 0.0625
```
]

---
layout: false
class: inverse, center, middle

# 2. å‡½æ•°

.font150[(_functions_)]

---

### 2.1 ä½¿ç”¨å‡½æ•°çš„ä¼˜ç‚¹

--

.pull-left.font130[

.full-width.content-box-blue.bold.note[å’Œå¤åˆ¶-ç²˜è´´-ä¿®æ”¹æ¯”ï¼Œä½¿ç”¨å‡½æ•°çš„ä¼˜ç‚¹]

- æ¸…æ™°çš„å‡½æ•°åè®©ä»£ç æ›´å®¹æ˜“ç†è§£

- å½“è¦æ±‚å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä½ åªéœ€è¦åœ¨ä¸€ä¸ªåœ°æ–¹è¿›è¡Œæ”¹åŠ¨

- æ¶ˆé™¤å¤åˆ¶-ç²˜è´´-ä¿®æ”¹è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„æ— å¿ƒä¹‹è¯¯

- æœ‰æ—¶ä½ å¿…é¡»å†™å‡½æ•°ï¼ˆå¦‚æŸäº›å‡½æ•°çš„å‚æ•°å°±æ˜¯å‡½æ•°ï¼‰

.full-width[.content-box-blue.bold[æ¥å›´è§‚ä¸€ä¸ªæ —å­ &amp;nbsp;&amp;nbsp; ğŸ‘‰]]

]

--

.pull-right[


```r
set.seed(1234)
df &lt;- tibble::tibble(
  a = rnorm(10),
  b = rnorm(10),
  c = rnorm(10)
)

# ç”²ï¼šä»¥ä¸Šç”Ÿæˆæ­£æ€åˆ†å¸ƒçš„éšæœºå˜é‡å¹¶ç»„è£…æˆdf â€¦â€¦
# ä¹™ï¼šè¿™æˆ‘æ˜ç™½ï¼
```


```r
# ç”²ï¼šé‚£ä¹ˆè¯·é—®ï¼Œä»¥ä¸‹åˆæ˜¯ç¥é©¬æ“ä½œï¼Ÿ
# ä¹™ï¼šâ€¦â€¦

df$a &lt;- (df$a - min(df$a, na.rm = TRUE)) /
        (max(df$a, na.rm = TRUE) - 
           min(df$a, na.rm = TRUE))
df$b &lt;- (df$b - min(df$b, na.rm = TRUE)) /
        (max(df$b, na.rm = TRUE) - 
           min(df$a, na.rm = TRUE))
df$c &lt;- (df$c - min(df$c, na.rm = TRUE)) /
        (max(df$c, na.rm = TRUE) - 
           min(df$c, na.rm = TRUE))
```
]

---
layout: true

### 2.2 ç¼–å†™å‡½æ•°çš„å¥—è·¯

---

.full-width[.content-box-blue.bold.font120[Step#1 åˆ†æé‡å¤æ€§çš„ä»£ç  &lt;sup&gt;.red[*1]&lt;/sup&gt;]]

.code110[

```r
(df$a - min(df$a, na.rm = TRUE)) /
  (max(df$a, na.rm = TRUE) - min(df$a, na.rm = TRUE))
```
]

--

&lt;br&gt;

.full-width[.content-box-blue.bold.font120[Step#2 å°†å‡½æ•°çš„è¾“å…¥æå–ä¸ºä¸´æ—¶å˜é‡ &lt;sup&gt;.red[*2]&lt;/sup&gt;]]

.code110[

```r
x &lt;- df$a
(x - min(x, na.rm = TRUE)) / 
  (max(x, na.rm = TRUE) - min(x, na.rm = TRUE))
```

```
#&gt;  [1] 0.332 0.765 1.000 0.000 0.809 0.831 0.516 0.524 0.519 0.424
```
]

.footnote.red[
\*1ï¼šå¯é€‰æ­¥éª¤ã€‚  
\*2: å¤šä¸ª__è¾“å…¥__ä¹Ÿå¯ç±»ä¼¼å¤„ç†ã€‚
]

---

.full-width[.content-box-blue.bold.font120[Step#3 &amp;nbsp; åŒ…è£…æˆå‡½æ•° [ -&gt; æ”¹è¿›] -&gt; æµ‹è¯•]]

.code100[

```r
rescale01 &lt;- function(x) {
  (x - min(x, na.rm = TRUE)) / 
    (max(x, na.rm = TRUE) - min(x, na.rm = TRUE))
}
rescale01(df$a)  # æµ‹è¯•çœ‹çœ‹ç»“æœæ˜¯å¦æ­£ç¡®
```

```
#&gt;  [1] 0.332 0.765 1.000 0.000 0.809 0.831 0.516 0.524 0.519 0.424
```
]

--

.code100[

```r
# æ”¹è¿›ä¹‹ï¼šä½¿ç”¨range()ï¼Œä¸€ä¸¾å¾—åˆ°minå’Œmax
rescale01 &lt;- function(x) {
  rng &lt;- range(x, na.rm = TRUE)  
  (x - rng[1]) / (rng[2] - rng[1])
}
rescale01(df$a)  # æµ‹è¯•çœ‹çœ‹ç»“æœæ˜¯å¦æ­£ç¡®
```

```
#&gt;  [1] 0.332 0.765 1.000 0.000 0.809 0.831 0.516 0.524 0.519 0.424
```
]

---

.full-width[.content-box-blue.bold.font120[åº”ç”¨æ–°ç¼–å†™çš„å‡½æ•°]]

.code95[

```r
df$a &lt;- rescale01(df$a)
df$b &lt;- rescale01(df$b)
df$c &lt;- rescale01(df$c)
df
```

```
#&gt; # A tibble: 10 Ã— 3
#&gt;       a      b     c
#&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1 0.332 0.153  0.782
#&gt; 2 0.765 0      0.473
#&gt; 3 1     0.0651 0.498
#&gt; # â€¦ with 7 more rows
```
]

--

.full-width.content-box-blue.bold.font120[ä½† â€¦â€¦ ä¸Šé¢çš„ä»£ç è¿˜æ˜¯æœ‰ç‚¹ WETï¼Œä¸å¤Ÿ DRYï¼]

.full-width.content-box-blue.bold.font120.info[è§£å†³æ–¹æ¡ˆï¼šç”¨&amp;nbsp;`for`&amp;nbsp;å¾ªç¯æˆ–å‡½æ•°å¼ç¼–ç¨‹]


---

.full-width[.content-box-blue.bold.font120.note[R ä¸­å‡½æ•°çš„æ„æˆè¦ç´ ]]

&lt;br&gt;

.code100[

```r
rescale01 &lt;-                            # å‡½æ•°åï¼šrescale01
  function(x)                           # å‡½æ•°å‚æ•°ï¼š  &lt;- formals()
  {                                     # å‡½æ•°ä½“ï¼š{   &lt;- body()
    rng &lt;- range(x, na.rm = TRUE)       # ...
    (x - rng[1]) / (rng[2] - rng[1])    # ...
  }                                     # } + å‡½æ•°ç¯å¢ƒ &lt;- enviornment()
```
]

---

.pull-left.font110[

.full-width[.content-box-blue.font110.bold.note[å‡½æ•°å]]

- æ˜æ™°æ˜“æ‡‚ã€å»ºè®®ä¸ºåŠ¨è¯

- æ¨è`snake_case`å‘½åæ³•

- ä¿æŒä¸€è‡´ï¼Œå¦‚ç»Ÿä¸€å‰ç¼€

.code90[

```r
# Long, but clear
impute_missing()
collapse_years()

# common prefix for a family
stringr::str_*()

# Never do this!
col_mins &lt;- function(x, y) {}
rowMaxes &lt;- function(y, x) {}
```
]
]

--

.pull-right.font110[

.full-width[.content-box-blue.font110.bold.note[å‡½æ•°ä½“]]

- ä»£ç ç¼©è¿›ï¼Œå½¢æˆå±‚çº§ç»“æ„

- ä½¿ç”¨ç©ºæ ¼

- åˆç†ä½¿ç”¨æ³¨é‡Š
  - è¯´æ˜å‡½æ•°ç›®çš„
  - ä»£ç åˆ†å—ï¼ˆCtrl+Shift+Rï¼‰

- ä½¿ç”¨ä¸­é—´å˜é‡

&lt;br&gt;

- **ä¿æŒä¸€è‡´é£æ ¼** &amp;nbsp; ğŸ‘‰ `styler` åŒ…

]

---
layout: true

### 2.3 å‡½æ•°çš„å‚æ•°

---

.full-width[.content-box-blue.bold.font120.note[å‡½æ•°çš„å‚æ•°å¤§è‡´å¯åˆ’åˆ†ä¸ºä¸¤ç±»ï¼š]]

.font110[
1. æä¾›å‡½æ•°æ“ä½œçš„ï¼ˆæ•°æ®ï¼‰å¯¹è±¡
2. æ§åˆ¶å‡½æ•°å¦‚ä½•æ“ä½œå¯¹è±¡çš„å…·ä½“ç»†èŠ‚
]

.code90[

```r
?t.test  # args(t.test)æˆ–formals(t.test)åœ¨æ­¤ä¸å¥½ç”¨
# t.test(x, y = NULL,
#        alternative = c("two.sided", "less", "greater"),
#        mu = 0, paired = FALSE, var.equal = FALSE,
#        conf.level = 0.95, ...)
```
]

--

.full-width[.content-box-blue.bold.font120.info[é€šå¸¸æŠŠå¯¹è±¡å‚æ•°æ”¾åœ¨æœ€å‰é¢ï¼Œå…¶ä½™å‚æ•°åˆ™æŒ‰é‡è¦æ€§æ’åºï¼Œå¹¶è®¾å®šé»˜è®¤å€¼]]

--

.pull-left[
.full-width[.content-box-blue.bold.font120.info[å‚æ•°åå¯é‡‡ç”¨çº¦å®šä¿—æˆçš„åå­—ï¼Œå¹¶ä¸é€šå¸¸ç”¨æ³•ä¿æŒä¸€è‡´ ğŸ‘‰ ]]

]

.pull-right.font90[

|å‚æ•°å       |æƒ¯å¸¸å«ä¹‰          |å‚æ•°å       |æƒ¯å¸¸å«ä¹‰             |
|:------------|:-----------------|:------------|:--------------------|
|`x`, `y`, `z`|æ•°æ®å‘é‡          |`i`, `j`     |è¡Œåˆ—åºå·             |
|`df`         |æ•°æ®æ¡†            |`n`          |å‘é‡é•¿åº¦æˆ–æ•°æ®æ¡†è¡Œæ•° |
|`w`          |æƒé‡å‘é‡          |`na.rm`      |æ˜¯å¦ç§»é™¤ç¼ºå¤±å€¼       |

]

---

.full-width[.content-box-blue.bold.font120.info[ç‰¹æ®Šå‚æ•° `...`]]

--

.code100[

```r
# å¾ˆå¤šRå‡½æ•°æ¥å—ä»»æ„æ•°é‡çš„è¾“å…¥ï¼Œæ­¤æ—¶å¯ç”¨...æ¥æ•æ‰æœªè¢«åŒ¹é…çš„å‚æ•°
sum(1, 2, 3, 4, 5, NA, 7, 8, 9, 10, na.rm = TRUE)
```

```
#&gt; [1] 49
```
]

--

.code100[

```r
# ä¹Ÿå¯ç”¨...å°†ä¸æƒ³ç›´æ¥å¤„ç†çš„å‚æ•°ä¼ é€’è‡³å‡½æ•°ä½“å†…è°ƒç”¨çš„åº•å±‚å‡½æ•°ï¼Œå¦‚
rule &lt;- function(..., pad = "-") {
  title &lt;- paste0(...)
  width &lt;- getOption("width") - nchar(title) - 6
  cat("## ", title, " ", stringr::str_dup(pad, width), "\n", 
      sep = "")
}
rule("Important output", pad = "=")
```

```
## Important output ================================================
```
]

---

.full-width[.content-box-blue.bold.font120.info[åœ¨å‡½æ•°ä½“ä¸­å¯¹é‡è¦å‚æ•°çš„å–å€¼è¿›è¡Œæ£€éªŒ]]

.code90[

```r
wt_mean &lt;- function(x, w, na.rm = FALSE) {
* if (length(x) != length(w)) {   # conditional execution
    stop("`x` and `w` must be the same length", call. = FALSE)
  }
* stopifnot(is.logical(na.rm), length(na.rm) == 1)

* if (na.rm) {
    miss &lt;- is.na(x) | is.na(w)
    x &lt;- x[!miss]
    w &lt;- w[!miss]
  }
  sum(w * x) / sum(w)
}
```
]

--

.pull-left[

```r
wt_mean(1:6, 5:1, na.rm = "foo")
```

```
#&gt; Error: `x` and `w` must be the same length
```
]

--

.pull-right[

```r
wt_mean(1:6, 6:1, na.rm = "foo")
```

```
#&gt; Error in wt_mean(1:6, 6:1, na.rm = "foo"): is.logical(na.rm) is not TRUE
```
]

---

.full-width[.content-box-blue.bold.font120.note[è°ƒç”¨å‡½æ•°æ—¶å°†_å®é™…å‚æ•°_æ˜ å°„åˆ°_å½¢å¼å‚æ•°_ä¸‰ç§æ–¹æ³•çš„ä¼˜å…ˆçº§ä¾æ¬¡ä¸ºï¼š]]

.bold.font120[&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;åå­—å®Œå…¨åŒ¹é… &gt;&gt; åå­—å‰ç¼€éƒ¨åˆ†åŒ¹é… &gt;&gt; ä½ç½®åŒ¹é…]

--

.full-width[.content-box-blue.bold.font120.note[è°ƒç”¨å‡½æ•°æ—¶é€šå¸¸å¯ç•¥å»å¯¹è±¡å‚æ•°åï¼Œè€Œå…¶ä½™å‚æ•°åˆ™å»ºè®®ä½¿ç”¨å…¨å]]

--

.code100[

```r
# Good
mean(1:10, na.rm = TRUE)
ggplot(mpg, aes(x = displ, y = hwy)) + geom_point()
```
]

--

.code100[

```r
# Bad
mean(1:10, , TRUE)          # ä½ç½®åŒ¹é…
mean(n = TRUE, x = 1:10)    # ç®€å†™â€œç»†èŠ‚â€å‚æ•°å
mean(, TRUE, x = 1:10)      # å‚æ•°ååŒ¹é… + ä½ç½®åŒ¹é…
```
]

---
layout: true

### 2.4 å‡½æ•°çš„è¿”å›å€¼

---

.full-width[.content-box-blue.bold.font120.note[é€šå¸¸å‡½æ•°è¿”å›å…¶æœ€åä¸€ä¸ªè¯­å¥æ±‚å€¼çš„ç»“æœ]]

--

.full-width[.content-box-blue.bold.font120.note[å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç”¨ `return()` æ¥æå‰è¿”å›ç»“æœï¼Œä»è€Œè®©ä»£ç æ›´æ˜“è¯»]]

--

.pull-left.code90[

```r
f &lt;- function() {
  if (condition) {
    # Do 
    # something
    # that
    # takes
    # many
    # lines
    # to
    # express
  } else {
    # return something short
  }
}
```
]

--

.pull-right.code90[

```r
f &lt;- function() {
  if (!condition) {
*   return(something_short)
  }

  # Do 
  # something
  # that
  # takes
  # many
  # lines
  # to
  # express
}
```
]

---

.full-width[.content-box-blue.bold.font120.note[ç¼–å†™æ”¯æŒç®¡é“æ“ä½œ `%&gt;%` çš„å‡½æ•°]]

- .font120[.bold[_transformation_ ç±»å‹çš„å‡½æ•°]ï¼šç›´æ¥å¯¹è¾“å…¥çš„ï¼ˆæ•°æ®ï¼‰å¯¹è±¡è¿›è¡Œè½¬åŒ–æ“ä½œï¼Œç”Ÿæˆæ–°çš„ï¼ˆæ•°æ®ï¼‰å¯¹è±¡ã€‚æ­¤ç±»å‡½æ•°å¤©ç„¶æ”¯æŒç®¡é“æ“ä½œã€‚]
- .font120[.bold[_side-effect_ ç±»å‹çš„å‡½æ•°]ï¼šå°±è¾“å…¥çš„ï¼ˆæ•°æ®ï¼‰å¯¹è±¡å®Œæˆç‰¹å®šä»»åŠ¡ï¼Œå¦‚èµ‹å€¼ `&lt;-`ã€æ‰“å°ç»“æœã€ä½œå›¾ã€å­˜å…¥æ–‡æ¡£ç­‰ã€‚æ­¤ç±»å‡½æ•°æœ€å¥½èƒ½ç”¨ `invisible()` ä¸å¯è§åœ°è¿”å›è¾“å…¥å¯¹è±¡ï¼Œä»è€Œæ”¯æŒç®¡é“æ“ä½œã€‚]

--

.pull-left.code90[

```r
show_missings &lt;- function(df) {
  n &lt;- sum(is.na(df))
  cat("Missing values: ", n, "\n", 
      sep = "")
* invisible(df)
}
```


```r
x &lt;- show_missings(mtcars)
```

```
#&gt; Missing values: 0
```

```r
class(x)
```

```
#&gt; [1] "data.frame"
```

]

--

.pull-right.code90[

```r
library(dplyr)
mtcars %&gt;%
  show_missings() %&gt;%
  mutate(
    mpg = ifelse(mpg &lt; 20, NA, mpg)
  ) %&gt;%
  show_missings()
```

```
#&gt; Missing values: 0
#&gt; Missing values: 18
```
]

---
layout: false

### 2.5 å‡½æ•°çš„ç¯å¢ƒ

.code90[

```r
f &lt;- function(x) {
  x + y
}
```
]

--

.full-width[.content-box-blue.bold.font120.info[å‰é¢å®šä¹‰çš„ `f` çœ‹èµ·æ¥åƒä¸ªå¥‡æ€ªçš„å‡½æ•°ï¼šåªæœ‰ä¸€ä¸ªå‚æ•° `x`ï¼Œå¸Œæœ›è¿”å› `x + y` çš„å€¼ï¼Œä½†å´æ²¡æœ‰å¯¹ `y` è¿›è¡Œå®šä¹‰å’Œèµ‹å€¼ ğŸ˜²]]

--

.full-width[.content-box-blue.bold.font120.info[ä½†åœ¨ R ä¸­è¿™æ˜¯ä¸ªå®Œå…¨åˆæ³•çš„å‡½æ•°ï¼ŒR ä¼šæ ¹æ®æ‰€è°“çš„â€œè¯æ³•ä½œç”¨åŸŸâ€è§„åˆ™ï¼ˆ_lexical scoping_ï¼‰æ¥æŸ¥æ‰¾ `y` çš„å–å€¼ï¼ŒæŸ¥æ‰¾çš„ç»“æœå—åˆ°å‡½æ•°ç¯å¢ƒçš„å½±å“ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œç”±äºåœ¨å‡½æ•° `f` ä¸­å¹¶æœªå®šä¹‰ `y`ï¼ŒR å°±ä¼šä¾æ¬¡åˆ°åˆ›å»ºå‡½æ•° `f` çš„ç¯å¢ƒï¼ˆå³å°é—­ç¯å¢ƒï¼‰åŠå…¶çˆ¶ç¯å¢ƒä¸­æŸ¥æ‰¾ `y` çš„å€¼ã€‚]]

.pull-left.code90[

```r
environment(f)
```

```
#&gt; &lt;environment: R_GlobalEnv&gt;
```
]

--

.pull-right.code90[

```r
x &lt;- 100; y &lt;- 100; f(10)
```

```
#&gt; [1] 110
```

```r
x &lt;- 100; y &lt;- 1000; f(10)
```

```
#&gt; [1] 1010
```
]

---
background-image: url(imgs/first-class.png)
background-size: 15em
background-position: 90% 90%
layout: false


### 2.6 ä½œä¸ºä¸€ç­‰å…¬æ°‘çš„å‡½æ•°

.full-width[.content-box-blue.bold.font120.info[R çš„å‡½æ•°è¿˜æ˜¯æ‰€è°“çš„ _first-class_ å‡½æ•°ï¼Œé€‚ç”¨äºå‘é‡çš„æ‰€æœ‰æ“ä½œä¹Ÿéƒ½é€‚ç”¨äºå‡½æ•°]]

.font120[
1. å¯ä»¥å°†å‡½æ•°èµ‹å€¼ç»™å˜é‡ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥ä¸ -&gt; _åŒ¿åå‡½æ•°_ï¼‰

2. å°†å‡½æ•°å­˜å‚¨åœ¨åˆ—è¡¨ä¸­ï¼ˆ_å‡½æ•°åˆ—è¡¨_ï¼‰

3. åœ¨å‡½æ•°å†…åˆ›å»ºå‡½æ•°ï¼ˆ_å‡½æ•°å·¥å‚_ ä¸ _é—­åŒ…_ï¼‰

4. å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶å®ƒå‡½æ•°ï¼ˆ_æ³›å‡½_ï¼‰

5. ç”šè‡³æŠŠå‡½æ•°ä½œä¸ºä¸€ä¸ªå‡½æ•°çš„ç»“æœè¿”å›ï¼ˆ_å‡½æ•°å·¥å‚_ ä¸ _å‡½æ•°è¿ç®—ç¬¦_ï¼‰
]

---
layout: false
class: inverse, center, middle

# è¯¾åä½œä¸š

---

.large[
ğŸ• ç»“åˆè®²ä¹‰å†…å®¹**å¤ä¹ ** ğŸ“– [_R for Data Science_](https://r4ds.had.co.nz/) ä¸€ä¹¦çš„ç¬¬ 19 ç« å’Œç¬¬ 20 ç« 
]

--
.large[
ğŸ•‘ è¿›ä¸€æ­¥å®Œå–„å¹¶é‡æ–°æäº¤ *L03_RMarkdownä¸Quarto* çš„è¯¾åä½œä¸š ğŸ“‘
]

--
.pull-left[

1. ç”±è€å¸ˆï¼ˆåŸºäºæŸäº›è€ƒè™‘å› ç´ ï¼‰åŠéšæœºåˆ†ç»„ï¼ˆå·²å®Œæˆï¼Œè§å³è¡¨ &gt;&gt;ï¼‰

2. å°ç»„æˆå‘˜ä»¥ä¹‹å‰æäº¤çš„å¤šä»½ L03 è¯¾åä½œä¸šä¸ºåŸºç¡€ï¼Œç¢°å¤´è®¨è®ºå¹¶ç›¸äº’å­¦ä¹ å€Ÿé‰´ï¼Œä»¥å°ç»„ä¸ºå•ä½é‡æ–°åˆ¶ä½œä¸€ä»½è¯¾åä½œä¸š

3. **åœ¨ slides æ–‡æ¡£ä¸­å¢åŠ è‹¥å¹²é¡µï¼Œè®°å½•å°ç»„è®¨è®ºè¿‡ç¨‹ä¸å†…å®¹ã€æ–°ä½œä¸šçš„æ”¹è¿›ä¹‹å¤„å¹¶æ ¹æ®ç»„å‘˜çš„å‚ä¸åº¦å’Œè´¡çŒ®å¤§å°åˆ†é…å°ç»„çš„æ€»åˆ†æ•°ï¼ˆæ€»åˆ†æ•° = 10 * å°ç»„æˆå‘˜æ•°ï¼‰**

4. ç¡®è®¤ä¸¤ä»½æ–‡æ¡£è¿è¡Œæ— è¯¯åå°†æ–‡ä»¶å¤¹ğŸ“‚ *L03_HW* æ‰“åŒ…ä¸º .zip æ ¼å¼å‹ç¼©æ–‡æ¡£ï¼Œç”±å°ç»„ä¸­çš„**ä¸€ä½**åŒå­¦äº2022å¹´10æœˆ12æ—¥22:00å‰å°†å‹ç¼©åŒ…æäº¤è‡³ [{{åšæœäº‘é“¾æ¥}}](https://workspace.jianguoyun.com/inbox/collect/76ce62d2266649c68d899995c0afd1da/submitv2)

5. è€å¸ˆå°†ä»åŒå­¦ä»¬æäº¤çš„ä½œä¸šä¸­é€‰å– 3~5 ä»½ä¼˜ç§€ä½œä¸šï¼Œå±•ç¤ºäºè¯¾ç¨‹ç½‘ç«™ä¸Šï¼Œä¾›åŒå­¦ä»¬å­¦ä¹ å‚è€ƒ

]

.pull-right.font110[

|æˆå‘˜1  |æˆå‘˜2  |æˆå‘˜3  |æˆå‘˜4    |
|:------|:------|:------|:--------|
|ç™½é›¨å©· |ç‹æ¢“èŒ |æèŠ³ç‰ |ä¸¥é‚“è†é›… |
|é™ˆé¢–å€© |é‚¹æ¡¢çš“ |åˆ˜ä¹‹è£ |è°¢æŸæ°   |
|é«˜æ¨é©° |äºå°çŠ |é™ˆæ°   |æä¸–æ°   |
|èƒ¡å®‰çª |ç„¦é›¨æ¬£ |åº”èˆ’æ¬ |èµµå­é’§   |
|æçº¢æµª |æ¨æ˜Ÿé›¨ |ç‹åœ£é‘« |äºé‡     |
|æ—è‡»æ° |å¼ æ¬£   |ç‹é›¨å½¤ |ç”°ä¼Šè¿ª   |
|åˆ˜å‘å°§ |èƒ¡å…¸   |è·¯æ—­é£ |é¾šç¦æ·±   |
|é™†æ€æ©™ |æ—å®¸   |æ›¹ç…œ   |é™ˆæ™ºæ°   |
|å”ç§‹å©· |é‚µå˜‰è“‰ |æ¢…äº‘å¼€ |ææ¤ä¸¹   |
|è©¹è¾‰é“­ |æåº·å¹³ |å¼ å©§ç‘¶ |å¼ é“ç³   |
|å¼ æ¬£å®‡ |æ´ªç‘œè”“ |å¾é€¸ç¥º |         |
]

1. å®Œæˆç¬¬å…­è®²çš„è¯¾åç»ƒä¹  ğŸ‘©â€ğŸ’»
&gt; .code90[

```r
remotes::install_github("yyzeng/qfwr")
library(qfwr)
qfwr_ex("L06")
```
]

&lt;!-- --&gt;

&gt; .code80[
```
- ç¬¬6ç«  å·¥ä½œæµï¼šé¡¹ç›®86
  + 6.1 ä»€ä¹ˆæ˜¯çœŸå®çš„86
  + 6.2 ä½ çš„åˆ†æä½äºå“ªé‡Œ87
  + 6.3 è·¯å¾„å’Œç›®å½•88
  + 6.4 RStudio é¡¹ç›®88
  + 6.5 å°ç»“90
- ç¬¬7ç«  ä½¿ç”¨ `tibble` å®ç°ç®€å•æ•°æ®æ¡†73
  + 7.1 ç®€ä»‹93
  + 7.2 åˆ›å»º `tibble`93
  + 7.3 å¯¹æ¯” `tibble` ä¸ `data.frame` 95
    - 7.3.1 æ‰“å°95
    - 7.3.2 å–å­é›†96
  + 7.4 ä¸æ—§ä»£ç è¿›è¡Œäº¤äº’96
- ç¬¬14ç«  å‡½æ•°185
  + 14.1 ç®€ä»‹185
  + 14.2 ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨å‡½æ•°186
  + 14.3 äººä¸è®¡ç®—æœºçš„å‡½æ•°188
  + 14.4 æ¡ä»¶æ‰§è¡Œ190
      - 14.4.1 æ¡ä»¶191
      - 14.4.2 å¤šé‡æ¡ä»¶192
      - 14.4.3 ä»£ç é£æ ¼192
      - 14.4.4 ç»ƒä¹ 193
  + 14.5 å‡½æ•°å‚æ•°194
      - 14.5.1 é€‰æ‹©å‚æ•°åç§°195
      - 14.5.2 æ£€æŸ¥å‚æ•°å€¼195
      - 14.5.3 ç‚¹ç‚¹ç‚¹ï¼ˆ...ï¼‰197
      - 14.5.4 æƒ°æ€§æ±‚å€¼197
      - 14.5.5 ç»ƒä¹ 198
  + 14.6 è¿”å›å€¼198
      - 14.6.1 æ˜¾å¼è¿”å›è¯­å¥198
      - 14.6.2 ä½¿å¾—å‡½æ•°æ”¯æŒç®¡é“199
  + 14.7 ç¯å¢ƒ200
- ç¬¬15ç«  å‘é‡201
  + 15.1 ç®€ä»‹201
  + 15.2 å‘é‡åŸºç¡€202
  + 15.3 é‡è¦çš„åŸå­å‘é‡203
    - 15.3.1 é€»è¾‘å‹203
    - 15.3.2 æ•°å€¼å‹203
    - 15.3.3 å­—ç¬¦å‹204
    - 15.3.4 ç¼ºå¤±å€¼204
    - 15.3.5 ç»ƒä¹ 204
  + 15.4 ä½¿ç”¨åŸå­å‘é‡205
    - 15.4.1 å¼ºåˆ¶è½¬æ¢205
    - 15.4.2 æ£€éªŒå‡½æ•°206
    - 15.4.3 æ ‡é‡ä¸å¾ªç¯è§„åˆ™206
    - 15.4.4 å‘é‡å‘½å208
    - 15.4.5 å‘é‡å–å­é›†208
    - 15.4.6 ç»ƒä¹ 209
  + 15.5 é€’å½’å‘é‡ï¼ˆåˆ—è¡¨ï¼‰210
    - 15.5.1 åˆ—è¡¨å¯è§†åŒ–211
    - 15.5.2 åˆ—è¡¨å–å­é›†211
    - 15.5.3 è°ƒæ–™åˆ—è¡¨212
    - 15.5.4 ç»ƒä¹ 214
  + 15.6 ç‰¹æ€§214
  + 15.7 æ‰©å±•å‘é‡216
    - 15.7.1 å› å­216
    - 15.7.2 æ—¥æœŸå’Œæ—¥æœŸæ—¶é—´216
    - 15.7.3 `tibble`217
    - 15.7.4 ç»ƒä¹ 218
```
]

---
class: center middle
background-image: url(imgs/xaringan.png)
background-size: 12%
background-position: 50% 40%


&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
&lt;hr color='#f00' size='2px' width='80%'&gt;
&lt;br&gt;
.Large.red[_**æœ¬ç½‘é¡µç‰ˆè®²ä¹‰çš„åˆ¶ä½œç”± R åŒ… [{{`xaringan`}}](https://github.com/yihui/xaringan) èµ‹èƒ½ï¼**_]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="../libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
